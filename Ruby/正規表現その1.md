# 正規表現とは

参考リンク：[初心者歓迎！手と目で覚える正規表現入門・その１「さまざまな形式の電話番号を検索しよう」](https://qiita.com/jnchito/items/893c887fbf19e17d3ff9)

> 正規表現（せいきひょうげん、英: regular expression）とは、文字列の集合を一つの文字列で表現する方法の一つである。


簡単に説明すると「パターンを指定して，文字列を効率よく検索・置換するためのミニ言語」  
英語でRegular expressionといい，RegexやRegexpと書かれることが多いので頭の片隅にいれておこう



## メタ文字「\d」

`\d`は正規表現では特別な意味を持ち，「1個の半角数字（0123456789）」を意味するメタ文字．（文字クラスと呼ばれる） 
普通の検索であれば\dは"\d"という文字列そのものを検索するが，正規表現では「1個の半角数字」を検索する．

#### メタ文字をつなげて文字列を検索してみる

例：電話番号  
`\d\d-\d\d\d\d-\d\d\d\d`  
こうすると，nn-nnnn-nnnnという形の（nは半角数字）文字列を検索する．

### コード上で動かしてみる

Rubyの場合 
`text.scan /\d\d-\d\d\d\d-\d\d\d\d/g` 


この一番後ろについている`g`はグローバルオプションと呼ばれるもので， 
- gなし =>最初の一件が見つかったら検索終了

- gあり =>一致する文字列をすべて抽出

という違いがある．

### いろんな市外局番に対応させる

実際には市外局番にはいろいろなパターンがある．それに全て対応させるにはどうすればよいだろうか． 
こういった時には，「量指定子」と呼ばれるメタ文字で文字の個数を限定することができる．  

#### メタ文字{n,m}

`{n,m}`は「直前の文字がn個以上，ｍ個以下」の意味になる．`{n}`ならちょうどn. 
よって先ほどの電話番号は  
`\d{2,5}-\d{1,4}-\d{4}`で検索できる！


### ハイフンだけではなく，カッコにも対応させる

"090(3728)3819"というような，ハイフンではなくカッコで表記される場合もある．この場合はどうしようか． 
この場合は`[AB]`と書くことで，カッコの中のいずれか一文字という意味になる．  
例であれば，`\d{2,5}[-(]\d{1,4}[)-]\d{4}`

## まとめ
正規表現を知らないと`\d{2,5}[-(]\d{1,4}[)-]\d{4}`は暗号にしかみえないが，理解すれば結構簡単で便利なもの！
