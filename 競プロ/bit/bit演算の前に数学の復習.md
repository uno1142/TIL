# 今更人に聞けない！二進法をしっかり理解しておこう！

2進法。コンピュータサイエンスの基礎中の基礎。なんなら高校数学や場合によっては中学でもやるのかな？  
もちろん僕もやった記憶はあるけど曖昧だし、久しぶりに2進数表記の数字列を見たときに意味が分からなかった（恥）  

まあ、わからないならしっかり覚えればいい！ってことでしっかり復習しておきます。  
ここを理解していないとbit演算が分からないはず。  


## そもそも二進法って？

二進法とは、0と1の2つの数で数を表現する数の数え方の一種。  
二進法では2を底とする。　　

## 底ってなんだっけ(対数)

はい高卒どころか中卒レベル。数学ずっと使ってなかったのでこんなことすら忘れていました。  
まず対数ですがいわゆるlogです。ちょっと復習しておきます。  


例えば2<sup>3</sup>=8という等式では2を3乗したら8になるという意味です。  
3はいわゆる指数です。ここまでは流石にわかる。  
そしてこの2のことを底と呼びます。  

一方で「逆に〇を何乗すれば△になるか」を表す数のことを「対数」と呼びます。  
ここで「2を何乗すれば8になるか」を対数で表すと「log<sub>2</sub>8=x」となります。  
この時の2を底と呼び、要するに対数とは底を何乗したら真数(この場合8)になるかを表します。  

つまり指数関数でも対数でも、底は基準とする数（基数）なわけです。  
要するに二進法というのは2を基準とする数の数え方になります。

#### 寄り道：対数関数の公式や使い方

これはただの高校数学の復習です。いかんせん忘れているのでしっかりやっちゃいます。  
ちょっと脱線するので理解している人や二進数について知りたかった場合は飛ばそう。

##### 対数関数の公式

1. log<sub>a</sub>MN = log<sub>a</sub>M + log<sub>a</sub>N  
  底が同じ対数の加算は真数を乗算したものと等しい  
1. log<sub>a</sub>M/N = log<sub>a</sub>M - log<sub>a</sub>N  
  1が乗算なので除算  
1. log<sub>a</sub>M<sup>k</sup> = k log<sub>a</sub>M   
  真数のk乗は外に出せる  
  <br>
具体例　  

1→ log<sub>2</sub>(8 * 4) = log<sub>2</sub>32 = 5 = 3 + 2 = log<sub>2</sub>8 + log<sub>2</sub>4  
2→ log<sub>2</sub> 8 / 4  = log<sub>2</sub>2 = 1 = 3 - 2 = log <sub>2</sub>8 - log<sub>2</sub>4  
3→ log<sub>2</sub> 8 <sup>3</sup> = log<sub>2</sub>512 = 9 = 3 * 3 = 3 log<sub>2</sub>8
 

##### 「対数をとる」

>「対数をとる」とは、M<sup>k</sup>=N (>0) が成り立つときには log<sub>a</sub>M<sup>k</sup>=log<sub>a</sub>N も成り立つことを利用して、式の形を log<sub>a</sub>M<sup>k</sup>=log<sub>a</sub>N に変形することを言います。  

底aはなんでもいいが

1. 10進数で計算するときに便利な10
1. 微分するときに便利なネイピア数e = 2.718...

で取るのが基本。

##### では対数はどう使う？

メリットは
**かけ算を足し算に、累乗をかけ算に落としこみ、計算を簡単にできる**
という点。

例題：  
2<sup>100</sup>は何桁の数で、上3桁の数字はいくつか求めよ  


解法:  
Z = 2<sup>100</sup>とおいて対数をとる。  
log<sub>10</sub>Z 
= log<sub>10</sub>2<sup>100</sup>  
= 100 * log<sub>10</sub>2  
≒ 100 * 0.30103(log<sub>10</sub>2のこと)  
= 30.103  


10><sup>n</sup> ≦ y <　10<sup>n+1</sup>はn+1桁の数であるから  
10<sup>30</sup> ≦ Z < 10<sup>31</sup>　は31桁の数  
よって31桁  
[常用対数表](http://emath.a.la9.jp/ydir/Wiki/index.php?%BE%EF%CD%D1%C2%D0%BF%F4%C9%BD)から、.103の範囲をを探すと  
上三桁の数字は126  



思い出してきた。対数を使うと累乗の計算がとても楽になる！  

## 二進数に戻る

### 2進数→16進数の変換

2進数→16進数は、4桁ごとに区切るといい。

例)  
0b10110101 //0bを付けると2進数を表す
→1011 | 0101  
→0,1,3のフラグが立っている　| 0,2のフラグが立っている  
→2の0,1,3乗を足す 1 + 2 + 8 = 11 = b |  1 + 4 = 5  
→0xb5 //0xを付けると16進数を表す


### 2進数→10進数の変換

2進数→10進数はフラグを見て桁数2の累乗すればよい
例)  
01110101101010101  
→0,2,4,6,8,9,11,13,14,15
→0 + 4 + 16 + 64 + 128 + ...(略)
→60245
