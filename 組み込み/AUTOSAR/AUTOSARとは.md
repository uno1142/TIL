# AUTOSARとは

就活に際して、自動車の組み込みの企業を受けることにしたので概要を学んでおく。


AUTOSAR(Automotive Open System Architecture)は、欧州の自動車メーカを中心に策定されている標準規格であり、車載ソフトウェアの爆発的な規模の増大に対して、再利用性を高めることにより対応するのが目的である。

既存の車載ソフトウェアは、ハードウェアやシステムとほぼ1対1で対応するものとして開発されてきたが、これに対しAUTOSARでは階層化されたソフトウェアアーキテクチャとして車載ソフトウェアの在り方を定義している。

各階層で使用するソフトウェアをモジュール化することにより、その再利用が可能になるという仕組みである。

## AUTOSARの構造

AUTOSARが定義するソフトウェアアーキテクチャは、大きく３階層に分かれている。上層からアプリケーション層、AUTOSARランタイム環境(RTE)、基盤ソフトウェア(BSW)である。

## BSW

AUTOSARベーシックソフトウェア(BSW)は、簡単に表現するならばどの種類のECUにでも入っている、土台部分の基本ソフトウェアであり、OS,通信スタック,診断、入出力、モード管理などの各種機能を提供するソフトウェアモジュール群から構成されている。

ハードウェア依存となるものは、マイコンに固有のMCALとOS、及びComplexDriverと、マイコンに外部接続されるデバイス用のドライバーのみである。それ以外はハードウェア非依存であり、ハードウェア変更に伴う影響を局所化することができる。

## アプリケーション層

アプリケーション層は、個別のECUの機能を実現するためにあり、通常複数のソフトウェアコンポーネント(以下SW-C)から構成される。

## RTE

ある機能を実現するために、車両内の複数のECUが関係することはすでに珍しくないが、車両をひとつのシステムと見たとき、センサーを監視する入力部分、アクチュエータを操作する出力部分、その間の演算部分の3つに分けることができる。  
そして、それぞれに対応するSW-Cの間は、Portにより接続される。

SW-Cは、機能を実現するために必要なセンサー、アクチュエータ、ROM/RAMなどの資源と、時間制約を考慮したうえで、それぞれのECUに割りつけられる。この割りつけにより、Port間の通信がCAN通信用BSWなどを利用したECU間通信になるのか、あるいはECU内通信になるのかが決まるが、その際にSW-Cそのものには一切手を加える必要がないように、あたかも電話交換機のように繋ぎ変えてくれるのがRTEのひとつの役割である。

これによって、アプリケーション層のトップダウン型開発が従来よりも容易となる。

まとめると、RTEが通信経路の違いを吸収してくれる

## データ交換形式の標準化

AUTOSARでは、ソフトウェアアーキテクチャだけではなく、データ交換形式の標準化も行っている。これは設計資産の利用可能期間をできるだけ長くしたり、インテグレーション作業の自動化の範囲を広げたりするうえで、非常に重要なものである。

AUTOSARではXMLを利用した標準データ交換形式を規定している。


## SW-Cの開発の流れ

SW-Cを実装する際には、SW-Cの間をつなぐPortや、イベント発生時に実行される処理であるRunnable Entityの中身の実装を行う。モデルベース開発の場合には、コード自動生成のために必要な設定を行うことで、これらの多くが行われる。

なお、Runnable Entityを起動するイベントやPortなどの情報はのちのRTEの設定の際に必要になるが、Runnable Enityの実際の中身はこの時点で作成されてなくてもいい。

次は、SW-C,BSWとRTEの統合のための各種設定の段階になる。
